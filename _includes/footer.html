<!--Footer-->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-7">
        <h3>About Us</h3>
        <p>The Digital Library Federation is committed to supporting inclusive, equitable, and highly effective communities of practice. We invite everyone who shares our goals to <a href="https://www.diglib.org/about/">learn more</a> and <a href="https://www.diglib.org/about/join/">join us</a>.</p>
        <h5>Social</h5>
        <ul class="list-unstyled">
          <li>
            <a href="http://twitter.com/CLIRDLF">
              <i class="fa fa-twitter"></i>
              Twitter</a>
            </li>
            <li>
              <a href="https://www.youtube.com/user/DLFCLIR">
                <i class="fa fa-youtube"></i>
                Youtube
              </a>
            </li>
            <li>
              <a href="https://www.facebook.com/CLIRDLF">
                <i class="fa fa-facebook"></i>
                Facebook
              </a>
            </li>
            <li>
              <a href="https://www.instagram.com/clirdlf/">
                <i class="fa fa-instagram"></i>
                Instagram
              </a>
            </li>
            <li>
              <a href="https://www.linkedin.com/groups/4836034/profile">
                <i class="fa fa-linkedin"></i>
                LinkedIn
              </a>
            </li>
          </ul>
        </div>
        <div class="col-5">
          <div class="footer-banner">
            <h3 class="footer-title dlf">
              <i class="icon-dlf-logo"></i>
              DLF</h3>
              <div class="vcard">
                <p>
                  <span class="fn org">Digital Library Federation</span><br>
                </p><div class="adr">
                  <div class="street-address">
                    1707 L St. NW,<br>
                    Suite 650
                    <br>
                  </div>
                </div>
                <div>
                  <span class="locality">Washington</span>,
                  <abbr class="region" title="District of Columbia">DC</abbr>
                  <span class="postal-code">20036</span>
                  <br>
                </div>

                <abbr title="Phone">P:</abbr>
                <span class="tel">(202) 939-4750</span>
                <br>
                <abbr title="Email">E:</abbr>
                <a class="email" href="mailto:info@diglib.org">info@diglib.org</a>
                <p></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-info-area">
        <div class="container">
          <div class="site-info">
            <p class="pull-right">
              All content on this site is available for re-use under
              <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC BY-SA 4.0 License</a>
            </p>
            <p class="logo">
              <a href="https://www.clir.org/">
                <i class="icon-clir-logo-square clir-color"></i>
                <span class="clir clir-font clir-color">CLIR</span>
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!--/.Footer-->
<!-- The scroll to top feature -->
<div class="scroll-top-wrapper ">
  <span class="scroll-top-inner">
    <i class="fa fa-2x fa-arrow-circle-up"></i>
  </span>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="{{ '/vendor/shufflejs/dist/shuffle.js' | prepend: site.baseurl }}"></script>

<script src="{{ '/js/scripts.js' | prepend: site.baseurl }}"></script>

<script>
'use strict';

var Shuffle = window.Shuffle;

var Dashboard = function (element) {
  this.element = element;

  this.shuffle = new Shuffle(element, {
    itemSelector: '.picture-item',
    sizer: element.querySelector('.my-sizer-element'),
  });

  // Log events.
  this.addShuffleEventListeners();

  this._activeFilters = [];

  this.addFilterButtons();
  this.addSorting();
  this.addSearchFilter();

  this.mode = 'exclusive';
};

Dashboard.prototype.toggleMode = function () {
  if (this.mode === 'additive') {
    this.mode = 'exclusive';
  } else {
    this.mode = 'additive';
  }
};

/**
* Shuffle uses the CustomEvent constructor to dispatch events. You can listen
* for them like you normally would (with jQuery for example).
*/
Dashboard.prototype.addShuffleEventListeners = function () {
  this.shuffle.on(Shuffle.EventType.LAYOUT, function (data) {
    console.log('layout. data:', data);
  });

  this.shuffle.on(Shuffle.EventType.REMOVED, function (data) {
    console.log('removed. data:', data);
  });
};

Dashboard.prototype.addFilterButtons = function () {
  var options = document.querySelector('.filter-options');

  if (!options) {
    return;
  }

  var filterButtons = Array.from(options.children);

  filterButtons.forEach(function (button) {
    button.addEventListener('click', this._handleFilterClick.bind(this), false);
  }, this);
};

Dashboard.prototype._handleFilterClick = function (evt) {
  var btn = evt.currentTarget;
  var isActive = btn.classList.contains('active');
  var btnGroup = btn.getAttribute('data-group');


  this._removeActiveClassFromChildren(btn.parentNode);

  var filterGroup;
  if (isActive) {
    btn.classList.remove('active');
    filterGroup = Shuffle.ALL_ITEMS;
  } else {
    btn.classList.add('active');
    filterGroup = btnGroup;
  }

  this.shuffle.filter(filterGroup);

};

Dashboard.prototype._removeActiveClassFromChildren = function (parent) {
  var children = parent.children;
  for (var i = children.length - 1; i >= 0; i--) {
    children[i].classList.remove('active');
  }
};

Dashboard.prototype.addSorting = function () {
  var buttonGroup = document.querySelector('.sort-options');

  if (!buttonGroup) {
    return;
  }

  buttonGroup.addEventListener('change', this._handleSortChange.bind(this));
};

Dashboard.prototype._handleSortChange = function (evt) {
  // Add and remove `active` class from buttons.
  var wrapper = evt.currentTarget;
  var buttons = Array.from(evt.currentTarget.children);
  buttons.forEach(function (button) {
    if (button.querySelector('input').value === evt.target.value) {
      button.classList.add('active');
    } else {
      button.classList.remove('active');
    }
  });

  // Create the sort options to give to Shuffle.
  var value = evt.target.value;
  var options = {};

  function sortByDate(element) {
    return element.getAttribute('data-created');
  }

  function sortByTitle(element) {
    return element.getAttribute('data-title').toLowerCase();
  }

  if (value === 'date-created') {
    options = {
      reverse: true,
      by: sortByDate,
    };
  } else if (value === 'title') {
    options = {
      by: sortByTitle,
    };
  }

  this.shuffle.sort(options);
};

// Advanced filtering
Dashboard.prototype.addSearchFilter = function () {
  var searchInput = document.querySelector('.js-shuffle-search');

  if (!searchInput) {
    return;
  }

  searchInput.addEventListener('keyup', this._handleSearchKeyup.bind(this));
};

/**
* Filter the shuffle instance by items with a title that matches the search input.
* @param {Event} evt Event object.
*/
Dashboard.prototype._handleSearchKeyup = function (evt) {
  var searchText = evt.target.value.toLowerCase();

  this.shuffle.filter(function (element, shuffle) {

    // If there is a current filter applied, ignore elements that don't match it.
    if (shuffle.group !== Shuffle.ALL_ITEMS) {
      // Get the item's groups.
      var groups = JSON.parse(element.getAttribute('data-groups'));
      var isElementInCurrentGroup = groups.indexOf(shuffle.group) !== -1;

      // Only search elements in the current group
      if (!isElementInCurrentGroup) {
        return false;
      }
    }

    var titleElement = element.querySelector('.picture-item__title');
    var titleText = titleElement.textContent.toLowerCase().trim();

    return titleText.indexOf(searchText) !== -1;
  });
};

document.addEventListener('DOMContentLoaded', function () {
  window.dashboard = new Dashboard(document.getElementById('grid'));
});
</script>

{% if site.google-tracking-id %}
<script>
window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
ga('create','{{ site.google-tracking-id }}','auto');ga('send','pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
{% endif %}
